{% extends 'onekloud/base.html' %}
{% load static core_extras %}

{% block css %}
<link rel="stylesheet" href="{% static 'customers/onekloud/css/customers.css' %}">
{% endblock %}

{% block top-right %}
<a class="pure-button pure-button-small pure-button-primary" href="{% url 'customers:list' %}">
    <i class="fa fa-reply"></i>&nbsp;
    Back
</a>
{% endblock %}

{% block content %}
<form id="customer-form" class="pure-form" method="post">

    {{ form.errors }}

    <div class="l-box">
        <fieldset id="step-1">
            <legend>Basic Info</legend>
            <div class="pure-g-r">
                <div class="pure-u-1-5">
                    <div class="l-box">
                        {{ form.salutation|attributes:"class: pure-input-1, placeholder: Salutation" }}
                    </div>
                </div>
                <div class="pure-u-2-5">
                    <div class="l-box">
                        {{ form.first_name|attributes:"class: pure-input-1, placeholder: * First name, required" }}
                    </div>
                </div>
                <div class="pure-u-2-5">
                    <div class="l-box">
                        {{ form.last_name|attributes:"class: pure-input-1, placeholder: * Last name, required" }}
                    </div>
                </div>
                <div class="pure-u-1">
                    <div class="pure-g-r">
                        <div class="pure-u-1-2">
                            <div class="l-box">
                                <div class="pure-group">
                                    {{ form.street|attributes:"class: pure-input-1, placeholder: &#xf015; Street" }}
                                    {{ form.city|attributes:"class: pure-input-1, placeholder: City" }}
                                    {{ form.country|attributes:"class: pure-input-1, placeholder: Country" }}
                                </div>
                            </div>
                        </div>
                        <div class="pure-u-1-2">
                            <div class="l-box">
                                <div class="pure-group">
                                    {{ form.state|attributes:"class: pure-input-1, placeholder: State" }}
                                    {{ form.postcode|attributes:"class: pure-input-1, placeholder: Postal code" }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </fieldset>

        <fieldset>
            <legend>Work</legend>
            <div class="pure-g-r">
                <div class="pure-u-1-2">
                    <div class="l-box">
                        {{ form.company|attributes:"class: pure-input-1, placeholder: &#xf0f7; Company" }}
                    </div>
                </div>
                <div class="pure-u-1-2">
                    <div class="l-box">
                        {{ form.position|attributes:"class: pure-input-1, placeholder: &#xf0b1; Position" }}
                    </div>
                </div>
            </div>
        </fieldset>

        <fieldset>
            <legend>Links</legend>
            <div class="pure-g-r">
                <div class="pure-u-1-2">
                    <div class="l-box">
                        {% if customer.website %}
                            <div class="btn-container">
                                <a class="pure-button pure-button-small"
                                   href="{{ customer.website }}" target="_blank">
                                    <i class="fa fa-globe"></i> {{ customer.website|truncatechars:"29" }}
                                </a>
                                <a class="pure-button pure-button-small pure-button-primary edit" data-name="website" href="#">
                                    <i class="fa fa-pencil"></i>
                                </a>
                            </div>
                        {% endif %}
                        <input type="text" name="website" class="pure-input-1" placeholder="&#xf0ac; Website"
                               {% if customer.website %}value="{{ customer.website }}" style="display: none"{% endif %}>
                    </div>
                    <div class="l-box">
                        {% if customer.facebook %}
                            <div class="btn-container">
                                <a class="pure-button pure-button-small pure-button-facebook"
                                   href="{{ customer.facebook }}" target="_blank">
                                    <i class="fa fa-facebook-square"></i> {{ customer.facebook|truncatechars:"29" }}
                                </a>
                                <a class="pure-button pure-button-small pure-button-primary edit" data-name="facebook" href="#">
                                    <i class="fa fa-pencil"></i>
                                </a>
                            </div>
                        {% endif %}
                        <input type="text" name="facebook" class="pure-input-1" placeholder="&#xf082; Facebook"
                               {% if customer.facebook %}value="{{ customer.facebook }}" style="display: none"{% endif %}>
                    </div>
                </div>

                <div class="pure-u-1-2">
                    <div class="l-box">
                        {% if customer.twitter %}
                            <div class="btn-container">
                                <a class="pure-button pure-button-small pure-button-twitter"
                                   href="{{ customer.twitter }}" target="_blank">
                                    <i class="fa fa-twitter-square"></i> {{ customer.twitter|truncatechars:"29" }}
                                </a>
                                <a class="pure-button pure-button-small pure-button-primary edit" data-name="twitter" href="#">
                                    <i class="fa fa-pencil"></i>
                                </a>
                            </div>
                        {% endif %}
                        <input type="text" name="twitter" class="pure-input-1" placeholder="&#xf081; Twitter"
                               {% if customer.twitter %}value="{{ customer.twitter }}" style="display: none"{% endif %}>
                    </div>
                    <div class="l-box">
                        {% if customer.linkedin %}
                            <div class="btn-container">
                                <a class="pure-button pure-button-small pure-button-linkedin"
                                   href="{{ customer.linkedin }}" target="_blank">
                                    <i class="fa fa-linkedin-square"></i> {{ customer.linkedin|truncatechars:"29" }}
                                </a>
                                <a class="pure-button pure-button-small pure-button-primary edit" data-name="linkedin" href="#">
                                    <i class="fa fa-pencil"></i>
                                </a>
                            </div>
                        {% endif %}
                        <input type="text" name="linkedin" class="pure-input-1" placeholder="&#xf08c; LinkedIn"
                               {% if customer.linkedin %}value="{{ customer.linkedin }}" style="display: none"{% endif %}>
                    </div>
                </div>
            </div>
        </fieldset>
    </div>

    <div class="pure-g-r bottom-mrg">
        <div class="pure-u-1-2">
            <div class="l-box">
                <fieldset>
                    <legend>Contact Info</legend>
                    <div class="l-box">
                        {% if customer.email %}
                            <div class="btn-container">
                                <a class="pure-button pure-button-small"
                                   href="mailto:{{ customer.email }}">
                                    <i class="fa fa-envelope"></i> {{ customer.email|truncatechars:"26" }}
                                </a>
                                <a class="pure-button pure-button-small pure-button-primary edit" data-name="email" href="#">
                                    <i class="fa fa-pencil"></i>
                                </a>
                            </div>
                        {% endif %}
                        <input type="text" name="email" class="pure-input-1" placeholder="&#xf0e0; Email"
                               {% if customer.email %}value="{{ customer.email }}" style="display: none"{% endif %}>
                    </div>

                    <div class="l-box">
                        {% if customer.skype %}
                            <div class="btn-container">
                                <a class="pure-button pure-button-small pure-button-skype"
                                   href="skype:{{ customer.skype }}?call">
                                   Skype Call
                                </a>
                                <a class="pure-button pure-button-small pure-button-skype"
                                   href="skype:{{ customer.skype }}?chat">
                                    Skype Chat
                                </a>
                                <a class="pure-button pure-button-small pure-button-primary edit" data-name="skype" href="#">
                                    <i class="fa fa-pencil"></i>
                                </a>
                            </div>
                        {% endif %}
                        <input type="text" name="skype" class="pure-input-1" placeholder="&#xf17e; Skype"
                               {% if customer.skype %}value="{{ customer.skype }}" style="display: none"{% endif %}>
                    </div>

                    <div class="l-box">
                        <div class="pure-group">
                            {{ form.cell_phone|attributes:"class: pure-input-1, placeholder: &#xf10b;  Cell phone number" }}
                            {{ form.main_phone|attributes:"class: pure-input-1, placeholder: &#xf095; Main phone number" }}
                        </div>
                    </div>

                    <div class="l-box">
                        {{ form.notes|attributes:"class: pure-input-1, rows: 5, placeholder: Your notes" }}
                    </div>
                </fieldset>
            </div>
        </div>

        <div class="pure-u-1-2">
            <div class="l-box">
                <fieldset id="step-2">
                    <legend>Add Amount</legend>
                    <div class="pure-g-r">
                        <div class="pure-u-1-2">
                            <div class="l-box">
                                {{ amount_form.management_form }}
                                {{ amount_form.0.value|attributes:"class: pure-input-1, placeholder: &#xf0d6; Amount" }}
                            </div>
                        </div>
                        <div class="pure-u-1-2">
                            <div class="l-box">
                                {{ amount_form.0.status|attributes:"class: pure-input-1" }}
                            </div>
                        </div>
                        <div class="pure-u-1">
                            <div class="l-box">
                                {{ amount_form.0.product|attributes:"class: pure-input-1, placeholder: Product name" }}
                            </div>
                            <div class="l-box pull-right">
                                <input class="pure-button pure-button-small pure-button-success pure-hidden-phone"
                                       type="submit" value="Save">
                                {% if customer.amounts.exists %}
                                    <a href="{% url 'customers:amount_list' customer.pk %}"
                                       class="pure-button pure-button-small pure-button-primary">
                                        View All
                                    </a>
                                {% endif %}
                                <div class="clearfix"></div>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>

    <div class="l-box">
        <button class="pure-button pure-button-large pure-button-success" type="submit">
            <i class="fa fa-check-square"></i>&nbsp;
            Save
        </button>
        <a class="pure-button pure-button-small pure-button-warning" href="{% url 'customers:list' %}">
            Cancel
        </a>
        {% if customer.pk %}
            <a class="pure-button pure-button-small pure-button-error" href="{% url 'customers:delete-customer' customer.pk %}">
                Delete
            </a>
        {% endif %}
    </div>

    {% csrf_token %}
</form>
{% endblock %}

{% block menu-customers %}
pure-menu-selected
{% endblock %}

{% block js %}
<script src="{% static 'customers/onekloud/js/lib.js' %}"></script>
<script src="{% static 'customers/onekloud/js/load.js' %}"></script>
{% endblock %}
