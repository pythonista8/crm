{% extends 'onekloud/base.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'reports/onekloud/css/reports.css' %}">
{% endblock %}

{% block head %}
<!--[if lte IE 8]>
    <script src="{% static 'reports/onekloud/js/excanvas.js' %}"></script>
<![endif]-->
{% endblock %}

{% block content %}
<div id="report-tabs">
    <div class="pure-g-r">
        <div class="pure-u-1">
            <h3>Monthly Sales Trend</h3>
            <div class="pure-g-r">
                <div class="pure-u-2-3">
                    <div class="l-box">
                        <canvas id="chart-trend" width="650" height="300"></canvas>
                    </div>
                </div>
                <div class="pure-u-1-3">
                    <div class="l-box">
                        <div class="chart-details">
                            <span class="chart-color" style="background: rgb(220,220,220)"></span>
                            <small>blah blah blah...</small>
                        </div>
                        <div class="chart-details">
                            <span class="chart-color" style="background: rgb(151,187,205)"></span>
                            <small>blah blah blah...</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="pure-u-1-2">
            <h3>Total Number of Cases</h3>
            {% if data_number %}
                <div class="pure-g-r">
                    <div class="pure-u-1-2 chart-box">
                        <div class="l-box">
                            <canvas id="chart-number" width="200" height="200"></canvas>
                        </div>
                    </div>
                    <div class="pure-u-1-2">
                        <div class="l-box">
                            {% for dict in data_number %}
                                <div class="chart-details">
                                    <span class="chart-color" style="background: {{ dict.color }}"></span>
                                    <small>{{ dict.label }} ({{ dict.value }})</small>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% else %}
                There is no data yet.
            {% endif %}
        </div>
        <div class="pure-u-1-2">
            <h3>Total Income</h3>
            {% if data_amount %}
                <div class="pure-g-r">
                    <div class="pure-u-1-2 chart-box">
                        <div class="l-box">
                            <canvas id="chart-amount" width="200" height="200"></canvas>
                        </div>
                    </div>
                    <div class="pure-u-1-2">
                        <div class="l-box">
                            {% for dict in data_amount %}
                                <div class="chart-details">
                                    <span class="chart-color" style="background: {{ dict.color }}"></span>
                                    <small>{{ dict.label }} ({{ dict.value }})</small>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            {% else %}
                There is no data yet.
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
{% if data_number or data_amount %}
    <script src="{% static 'reports/vendor/chartjs/js/Chart.js' %}"></script>
    <script>

    // Monthly Sales Trend.
    var monthLabels = [];

    {% for month in long_month_names %}
      monthLabels.push('{{ month }}');
    {% endfor %}

    var dataTrendOne = [];

    {% for amount in monthly_trend %}
      dataTrendOne.push({{ amount }});
    {% endfor %}

    var dataTrend = {
      labels: monthLabels,
      datasets: [
        {
          fillColor: "rgba(220,220,220,.5)",
          strokeColor: "rgba(220,220,220,1)",
          pointColor: "rgba(220,220,220,1)",
          pointStrokeColor: "#fff",
          data: dataTrendOne
        },
        {
          fillColor: "rgba(151,187,205,.5)",
          strokeColor: "rgba(151,187,205,1)",
          pointColor: "rgba(151,187,205,1)",
          pointStrokeColor: "#fff",
          data: [28,48,40,19,96,27,100,90,81,56,55,40]
        }
      ]
    };

    // Total Number of Cases.
    var dataNumber = [];

    {% for dict in data_number %}
      dataNumber.push({
        value: {{ dict.value }},
        color: '{{ dict.color }}'
      });
    {% endfor %}

    // Total Amount.
    var dataAmount = [];

    {% for dict in data_amount %}
      dataAmount.push({
        value: {{ dict.value }},
        color: '{{ dict.color }}'
      });
    {% endfor %}

    </script>
    <script src="{% static 'reports/onekloud/js/load.js' %}"></script>
{% endif %}
{% endblock %}

{% block menu-reports %}
pure-menu-selected
{% endblock %}
